plugins {
    id("maven-publish")
}

group("user11681")
version("1.6.0")

allprojects {
    plugins.apply("java-library")

    repositories {
        mavenCentral()

        maven {url = "https://auoeke.jfrog.io/artifactory/maven"}
    }

    dependencies {
        api("net.gudenau.lib:unsafe:latest.release")

        compileOnly("org.jetbrains:annotations:latest.release")
    }
}

sourceCompatibility = 8
targetCompatibility = 8

java {
    withSourcesJar()
}

publishing {
    publications {
        maven(MavenPublication) {
            groupId(project.group)
            artifactId(project.name)
            version(project.version)

            from(components.java)
        }
    }

    repositories {
        mavenLocal()

        maven {
            url = "https://auoeke.jfrog.io/artifactory/maven"

            credentials {
                username = System.env["ARTIFACTORY_USERNAME"]
                password = System.env["ARTIFACTORY_PASSWORD"]
            }
        }
    }
}
